{% extends 'base.html' %}
{% block title %}Пациент · Форма{% endblock %}
{% block breadcrumb %}Модули / <a class="text-blue-600 hover:underline" href="{% url 'patient_list' %}">Пациенты</a> / Форма{% endblock %}
{% block header %}{% if patient %}Редактировать пациента{% else %}Новый пациент{% endif %}{% endblock %}

{% block content %}
<div class="card p-5 max-w-3xl">
  <form method="post" class="space-y-5">
    {% csrf_token %}

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Имя (ism)</label>
        <input class="input" name="ism" value="{{ patient.ism|default:'' }}" required />
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Возраст (yosh)</label>
        <input class="input" name="yosh" type="number" min="0" value="{{ patient.yosh|default:'' }}" required />
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Пол (jins)</label>
        <select class="input" name="jins" required>
          <option value="E" {% if patient.jins == 'E' %}selected{% endif %}>Erkak</option>
          <option value="A" {% if patient.jins == 'A' %}selected{% endif %}>Ayol</option>
        </select>
      </div>

      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Телефон (telefon)</label>
        <input class="input" name="telefon" value="{{ patient.telefon|default:'' }}" required />
      </div>

      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Адрес (manzil)</label>
        <input class="input" name="manzil" value="{{ patient.manzil|default:'' }}" />
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Группа крови (qon_guruhi)</label>
        <input class="input" name="qon_guruhi" value="{{ patient.qon_guruhi|default:'' }}" placeholder="A+, O-, ..." />
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Аллергии</label>
        <input class="input" name="allergiyalar" value="{{ patient.allergiyalar|default:'' }}" />
      </div>

      <div class="sm:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-3">
        <label class="flex items-center gap-2 rounded-2xl border border-slate-200 bg-slate-50 p-3">
          <input type="checkbox" name="qand_kasalligi" {% if patient.qand_kasalligi %}checked{% endif %} />
          <span class="text-sm">Qand kasalligi</span>
        </label>
        <label class="flex items-center gap-2 rounded-2xl border border-slate-200 bg-slate-50 p-3">
          <input type="checkbox" name="gipertoniya" {% if patient.gipertoniya %}checked{% endif %} />
          <span class="text-sm">Gipertoniya</span>
        </label>
        <label class="flex items-center gap-2 rounded-2xl border border-slate-200 bg-slate-50 p-3">
          <input type="checkbox" name="yurak_kasalligi" {% if patient.yurak_kasalligi %}checked{% endif %} />
          <span class="text-sm">Yurak kasalligi</span>
        </label>
      </div>
    </div>

    <div class="flex gap-2">
      <button class="btn btn-primary" type="submit"><i class="fa-solid fa-check"></i> Сохранить</button>
      <a class="btn" href="{% url 'patient_list' %}">Отмена</a>
    </div>
  </form>
</div>
{% endblock %}
