{% extends 'base.html' %}
{% block title %}Персонал · Форма{% endblock %}
{% block breadcrumb %}Модули / <a class="text-blue-600 hover:underline" href="{% url 'staff_list' %}">Персонал</a> / Форма{% endblock %}
{% block header %}{% if staff_member %}Редактировать сотрудника{% else %}Новый сотрудник{% endif %}{% endblock %}

{% block content %}
<div class="card p-5 max-w-3xl">
  <form method="post" class="space-y-5">
    {% csrf_token %}
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Имя (ism)</label>
        <input class="input" name="ism" value="{{ staff_member.ism|default:'' }}" required />
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Роль (lavozim)</label>
        <select class="input" name="lavozim" required>
          {% for key,label in lavozim_choices %}
            <option value="{{ key }}" {% if staff_member.lavozim == key %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label class="text-xs font-semibold text-slate-600">Отдел (bolim)</label>
        <select class="input" name="bolim" required>
          {% for key,label in bolim_choices %}
            <option value="{{ key }}" {% if staff_member.bolim == key %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Телефон</label>
        <input class="input" name="telefon" value="{{ staff_member.telefon|default:'' }}" required />
      </div>

      <div class="sm:col-span-2">
        <label class="text-xs font-semibold text-slate-600">Email</label>
        <input class="input" type="email" name="email" value="{{ staff_member.email|default:'' }}" />
      </div>

      <div class="sm:col-span-2">
        <label class="flex items-center gap-2 rounded-2xl border border-slate-200 bg-slate-50 p-3">
          <input type="checkbox" name="faol" {% if staff_member.faol %}checked{% endif %} />
          <span class="text-sm">Faol (active)</span>
        </label>
      </div>
    </div>
    <div class="sm:col-span-2">
      <label class="text-xs font-semibold text-slate-600">
        Дата приёма на работу
      </label>
      <input
        type="date"
        class="input"
        name="ishga_olingan_sana"
        value="{{ staff_member.ishga_olingan_sana|date:'Y-m-d' }}"
        required
      />
    </div>

    <div class="flex gap-2">
      <button class="btn btn-primary" type="submit"><i class="fa-solid fa-check"></i> Сохранить</button>
      <a class="btn" href="{% url 'staff_list' %}">Отмена</a>
    </div>
  </form>
</div>
{% endblock %}
