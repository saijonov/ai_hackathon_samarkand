{% extends 'base.html' %}

{% block title %}{% if is_edit %}Xodimni tahrirlash{% else %}Yangi xodim{% endif %} - MedAI CRM{% endblock %}

{% block page_title %}{% if is_edit %}Xodimni tahrirlash{% else %}Yangi xodim qo'shish{% endif %}{% endblock %}
{% block page_subtitle %}{% if is_edit %}{{ staff.ism }} ma'lumotlarini yangilash{% else %}Yangi xodim ma'lumotlarini kiriting{% endif %}{% endblock %}

{% block content %}
<!-- Back Button -->
<a href="{% url 'staff_list' %}" class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors mb-6">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
    Xodimlar ro'yxatiga qaytish
</a>

<div class="max-w-2xl">
    <div class="card rounded-2xl overflow-hidden">
        <div class="p-6 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-slate-800 font-display">{% if is_edit %}Xodim ma'lumotlari{% else %}Yangi xodim{% endif %}</h2>
                    <p class="text-sm text-slate-500">Barcha maydonlarni to'ldiring</p>
                </div>
            </div>
        </div>

        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}
            
            <!-- Name -->
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">To'liq ism *</label>
                <input type="text" name="ism" value="{{ staff.ism|default:'' }}" required
                       class="form-input" placeholder="Aliyev Bobur Karimovich">
            </div>

            <!-- Role & Department -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Lavozim *</label>
                    <select name="lavozim" required class="form-input">
                        <option value="">Tanlang</option>
                        {% for value, label in lavozim_choices %}
                        <option value="{{ value }}" {% if staff.lavozim == value %}selected{% endif %}>{{ label }}</option>
                        {% empty %}
                        <option value="doctor">Shifokor</option>
                        <option value="nurse">Hamshira</option>
                        <option value="admin">Administrator</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Bo'lim *</label>
                    <select name="bolim" required class="form-input">
                        <option value="">Tanlang</option>
                        {% for value, label in bolim_choices %}
                        <option value="{{ value }}" {% if staff.bolim == value %}selected{% endif %}>{{ label }}</option>
                        {% empty %}
                        <option value="terapiya">Terapiya</option>
                        <option value="kardiologiya">Kardiologiya</option>
                        <option value="endokrinologiya">Endokrinologiya</option>
                        <option value="nevrologiya">Nevrologiya</option>
                        <option value="pediatriya">Pediatriya</option>
                        <option value="ginekologiya">Ginekologiya</option>
                        <option value="boshqa">Boshqa</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Contact -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Telefon *</label>
                    <input type="tel" name="telefon" value="{{ staff.telefon|default:'' }}" required
                           class="form-input" placeholder="+998 90 123 45 67">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Email</label>
                    <input type="email" name="email" value="{{ staff.email|default:'' }}"
                           class="form-input" placeholder="email@example.com">
                </div>
            </div>

            <!-- Date & Status -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Ishga olingan sana *</label>
                    <input type="date" name="ishga_olingan_sana" required
                           value="{% if staff.ishga_olingan_sana %}{{ staff.ishga_olingan_sana|date:'Y-m-d' }}{% endif %}"
                           class="form-input">
                </div>
                <div class="flex items-end">
                    <label class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-primary-300 hover:bg-primary-50 cursor-pointer transition-all w-full">
                        <input type="checkbox" name="faol" {% if staff.faol %}checked{% endif %}
                               class="w-5 h-5 text-primary-600 rounded border-slate-300 focus:ring-primary-500">
                        <div>
                            <span class="font-medium text-slate-700">Faol</span>
                            <p class="text-xs text-slate-500">Hozirda ishlamoqda</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex items-center justify-end gap-3 pt-6 border-t border-slate-100">
                <a href="{% url 'staff_list' %}" class="btn-secondary">Bekor qilish</a>
                <button type="submit" class="btn-primary inline-flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    {% if is_edit %}Saqlash{% else %}Qo'shish{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
